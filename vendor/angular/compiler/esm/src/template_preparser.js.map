{"version":3,"file":"template_preparser.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/template_preparser.ts"],"names":[],"mappings":";AAAA,uBAAsB,oBAAoB,CAAC,CAAA;AAG3C,4BAA0B,aAAa,CAAC,CAAA;AAExC,MAAM,gBAAgB,CAAC,sBAAsB,GAAG,QAAQ,CAAC;AACzD,MAAM,gBAAgB,CAAC,kBAAkB,GAAG,YAAY,CAAC;AACzD,MAAM,gBAAgB,CAAC,YAAY,GAAG,MAAM,CAAC;AAC7C,MAAM,gBAAgB,CAAC,mBAAmB,GAAG,KAAK,CAAC;AACnD,MAAM,gBAAgB,CAAC,oBAAoB,GAAG,MAAM,CAAC;AACrD,MAAM,gBAAgB,CAAC,oBAAoB,GAAG,YAAY,CAAC;AAC3D,MAAM,gBAAgB,CAAC,aAAa,GAAG,OAAO,CAAC;AAC/C,MAAM,gBAAgB,CAAC,cAAc,GAAG,QAAQ,CAAC;AACjD,MAAM,gBAAgB,CAAC,oBAAoB,GAAG,eAAe,CAAC;AAC9D,MAAM,gBAAgB,CAAC,aAAa,GAAG,aAAa,CAAC;AACrD;;;GAGG;AACH,yBAAgC,GAAmB;IACjD,IAAI,gBAAgB,CAAC,UAAU,GAAG,IAAI,CAAC;IACvC,IAAI,gBAAgB,CAAC,QAAQ,GAAG,IAAI,CAAC;IACrC,IAAI,gBAAgB,CAAC,OAAO,GAAG,IAAI,CAAC;IACpC,IAAI,gBAAgB,CAAC,WAAW,GAAG,KAAK,CAAC;IACzC,IAAI,gBAAgB,CAAC,SAAS,GAAW,IAAI,CAAC;IAC9C,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI;QACpB,IAAI,gBAAgB,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAC1D,EAAE,CAAC,CAAC,UAAU,IAAI,sBAAsB,CAAC,CAAC,CAAC;YACzC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC;QAC1B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,IAAI,oBAAoB,CAAC,CAAC,CAAC;YAC9C,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;QACxB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,IAAI,mBAAmB,CAAC,CAAC,CAAC;YAC7C,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,oBAAoB,CAAC,CAAC,CAAC;YAC7C,WAAW,GAAG,IAAI,CAAC;QACrB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,aAAa,CAAC,CAAC,CAAC;YACtC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1B,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,CAAC;QACH,CAAC;IACH,CAAC,CAAC,CAAC;IACH,UAAU,GAAG,wBAAwB,CAAC,UAAU,CAAC,CAAC;IAClD,IAAI,gBAAgB,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;IACvD,IAAI,gBAAgB,CAAC,IAAI,GAAG,4BAAoB,CAAC,KAAK,CAAC;IACvD,EAAE,CAAC,CAAC,uBAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,kBAAkB,CAAC,CAAC,CAAC;QACnD,IAAI,GAAG,4BAAoB,CAAC,UAAU,CAAC;IACzC,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,IAAI,aAAa,CAAC,CAAC,CAAC;QACrC,IAAI,GAAG,4BAAoB,CAAC,KAAK,CAAC;IACpC,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,IAAI,cAAc,CAAC,CAAC,CAAC;QACtC,IAAI,GAAG,4BAAoB,CAAC,MAAM,CAAC;IACrC,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,IAAI,YAAY,IAAI,OAAO,IAAI,oBAAoB,CAAC,CAAC,CAAC;QACvE,IAAI,GAAG,4BAAoB,CAAC,UAAU,CAAC;IACzC,CAAC;IACD,MAAM,CAAC,IAAI,gBAAgB,CAAC,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;AAClF,CAAC;AAnCe,uBAAe,kBAmC9B,CAAA;AAEU,4BAAoB,GAAQ,EAAE,CAAC;AAC1C,4BAAoB,CAAC,UAAU,GAAG,CAAC,CAAC;AACpC,4BAAoB,CAAC,KAAK,GAAG,CAAC,CAAC;AAC/B,4BAAoB,CAAC,UAAU,GAAG,CAAC,CAAC;AACpC,4BAAoB,CAAC,MAAM,GAAG,CAAC,CAAC;AAChC,4BAAoB,CAAC,KAAK,GAAG,CAAC,CAAC;AAC/B,4BAAoB,CAAC,4BAAoB,CAAC,UAAU,CAAC,GAAG,YAAY,CAAC;AACrE,4BAAoB,CAAC,4BAAoB,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC;AAC3D,4BAAoB,CAAC,4BAAoB,CAAC,UAAU,CAAC,GAAG,YAAY,CAAC;AACrE,4BAAoB,CAAC,4BAAoB,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC;AAC7D,4BAAoB,CAAC,4BAAoB,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC;AAG3D;IACA;;;;;;OAMG;IACH,YAAmB,IAA0B,EACtC,UAAkB,EAClB,QAAgB,EAChB,WAAoB,EACpB,SAAiB;QAJL,SAAI,GAAJ,IAAI,CAAsB;QACtC,eAAU,GAAV,UAAU,CAAQ;QAClB,aAAQ,GAAR,QAAQ,CAAQ;QAChB,gBAAW,GAAX,WAAW,CAAS;QACpB,cAAS,GAAT,SAAS,CAAQ;IAAG,CAAC;IAE1B,OAAO,8BAA8B;QACtC,gBAAgB;QACjB,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC;QAC/B,gBAAgB;QACjB,gBAAgB,CAAC,SAAS,CAAC,UAAU,CAAC;QACrC,gBAAgB;QACjB,gBAAgB,CAAC,SAAS,CAAC,QAAQ,CAAC;QACnC,gBAAgB;QACjB,gBAAgB,CAAC,SAAS,CAAC,WAAW,CAAC;QACtC,gBAAgB;QACjB,gBAAgB,CAAC,SAAS,CAAC,SAAS,CAAC;IACnC,CAAC;AAEH,CAAC;AA3BY,wBAAgB,mBA2B5B,CAAA;AACD;;;GAGG;AACH,kCAAkC,UAAkB;IAClD,EAAE,CAAC,CAAC,cAAO,CAAC,UAAU,CAAC,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;QACnD,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IACD,MAAM,CAAC,UAAU,CAAC;AACpB,CAAC","sourcesContent":["import {isBlank} from '../src/facade/lang';\n\nimport {HtmlElementAst} from './html_ast';\nimport {splitNsName} from './html_tags';\n\nconst /** @type {?} */ NG_CONTENT_SELECT_ATTR = 'select';\nconst /** @type {?} */ NG_CONTENT_ELEMENT = 'ng-content';\nconst /** @type {?} */ LINK_ELEMENT = 'link';\nconst /** @type {?} */ LINK_STYLE_REL_ATTR = 'rel';\nconst /** @type {?} */ LINK_STYLE_HREF_ATTR = 'href';\nconst /** @type {?} */ LINK_STYLE_REL_VALUE = 'stylesheet';\nconst /** @type {?} */ STYLE_ELEMENT = 'style';\nconst /** @type {?} */ SCRIPT_ELEMENT = 'script';\nconst /** @type {?} */ NG_NON_BINDABLE_ATTR = 'ngNonBindable';\nconst /** @type {?} */ NG_PROJECT_AS = 'ngProjectAs';\n/**\n * @param {?} ast\n * @return {?}\n */\nexport function preparseElement(ast: HtmlElementAst): PreparsedElement {\n  var /** @type {?} */ selectAttr = null;\n  var /** @type {?} */ hrefAttr = null;\n  var /** @type {?} */ relAttr = null;\n  var /** @type {?} */ nonBindable = false;\n  var /** @type {?} */ projectAs: string = null;\n  ast.attrs.forEach(attr => {\n    let /** @type {?} */ lcAttrName = attr.name.toLowerCase();\n    if (lcAttrName == NG_CONTENT_SELECT_ATTR) {\n      selectAttr = attr.value;\n    } else if (lcAttrName == LINK_STYLE_HREF_ATTR) {\n      hrefAttr = attr.value;\n    } else if (lcAttrName == LINK_STYLE_REL_ATTR) {\n      relAttr = attr.value;\n    } else if (attr.name == NG_NON_BINDABLE_ATTR) {\n      nonBindable = true;\n    } else if (attr.name == NG_PROJECT_AS) {\n      if (attr.value.length > 0) {\n        projectAs = attr.value;\n      }\n    }\n  });\n  selectAttr = normalizeNgContentSelect(selectAttr);\n  var /** @type {?} */ nodeName = ast.name.toLowerCase();\n  var /** @type {?} */ type = PreparsedElementType.OTHER;\n  if (splitNsName(nodeName)[1] == NG_CONTENT_ELEMENT) {\n    type = PreparsedElementType.NG_CONTENT;\n  } else if (nodeName == STYLE_ELEMENT) {\n    type = PreparsedElementType.STYLE;\n  } else if (nodeName == SCRIPT_ELEMENT) {\n    type = PreparsedElementType.SCRIPT;\n  } else if (nodeName == LINK_ELEMENT && relAttr == LINK_STYLE_REL_VALUE) {\n    type = PreparsedElementType.STYLESHEET;\n  }\n  return new PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs);\n}\nexport type PreparsedElementType = number;\nexport let PreparsedElementType: any = {};\nPreparsedElementType.NG_CONTENT = 0;\nPreparsedElementType.STYLE = 1;\nPreparsedElementType.STYLESHEET = 2;\nPreparsedElementType.SCRIPT = 3;\nPreparsedElementType.OTHER = 4;\nPreparsedElementType[PreparsedElementType.NG_CONTENT] = \"NG_CONTENT\";\nPreparsedElementType[PreparsedElementType.STYLE] = \"STYLE\";\nPreparsedElementType[PreparsedElementType.STYLESHEET] = \"STYLESHEET\";\nPreparsedElementType[PreparsedElementType.SCRIPT] = \"SCRIPT\";\nPreparsedElementType[PreparsedElementType.OTHER] = \"OTHER\";\n\n\nexport class PreparsedElement {\n/**\n * @param {?} type\n * @param {?} selectAttr\n * @param {?} hrefAttr\n * @param {?} nonBindable\n * @param {?} projectAs\n */\nconstructor(public type: PreparsedElementType,\npublic selectAttr: string,\npublic hrefAttr: string,\npublic nonBindable: boolean,\npublic projectAs: string) {}\n\n  static _tsickle_typeAnnotationsHelper() {\n /** @type {?} */\nPreparsedElement.prototype.type;\n /** @type {?} */\nPreparsedElement.prototype.selectAttr;\n /** @type {?} */\nPreparsedElement.prototype.hrefAttr;\n /** @type {?} */\nPreparsedElement.prototype.nonBindable;\n /** @type {?} */\nPreparsedElement.prototype.projectAs;\n  }\n\n}\n/**\n * @param {?} selectAttr\n * @return {?}\n */\nfunction normalizeNgContentSelect(selectAttr: string): string {\n  if (isBlank(selectAttr) || selectAttr.length === 0) {\n    return '*';\n  }\n  return selectAttr;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}