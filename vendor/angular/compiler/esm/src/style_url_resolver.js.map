{"version":3,"file":"style_url_resolver.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/style_url_resolver.ts"],"names":[],"mappings":"AAAA,+CAA+C;AAC/C,uFAAuF;;AAEvF,uBAA+D,oBAAoB,CAAC,CAAA;AAGpF;IACA;;;OAGG;IACH,YAAmB,KAAa,EACzB,SAAmB;QADP,UAAK,GAAL,KAAK,CAAQ;QACzB,cAAS,GAAT,SAAS,CAAU;IAAG,CAAC;IAE5B,OAAO,8BAA8B;QACtC,gBAAgB;QACjB,gBAAgB,CAAC,SAAS,CAAC,KAAK,CAAC;QAChC,gBAAgB;QACjB,gBAAgB,CAAC,SAAS,CAAC,SAAS,CAAC;IACnC,CAAC;AAEH,CAAC;AAfY,wBAAgB,mBAe5B,CAAA;AACD;;;GAGG;AACH,8BAAqC,GAAW;IAC9C,EAAE,CAAC,CAAC,cAAO,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC;QAAC,MAAM,CAAC,KAAK,CAAC;IACpE,IAAI,gBAAgB,CAAC,WAAW,GAAG,oBAAa,CAAC,UAAU,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC;IACnF,MAAM,CAAC,cAAO,CAAC,WAAW,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,SAAS,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC;AAC1F,CAAC;AAJe,4BAAoB,uBAInC,CAAA;AACD;;;;;;GAMG;AACH,0BAAiC,QAAqB,EAAE,OAAe,EACtC,OAAe;IAC9C,IAAI,gBAAgB,CAAC,SAAS,GAAG,EAAE,CAAC;IACpC,IAAI,gBAAgB,CAAC,eAAe,GAAG,oBAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAY,EAAE,CAAC,CAAC;QAC7F,IAAI,gBAAgB,CAAC,GAAG,GAAG,gBAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACzD,EAAE,CAAC,CAAC,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC/B,sEAAsE;YACtE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACd,CAAC;QACD,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;QAC/C,MAAM,CAAC,EAAE,CAAC;IACZ,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,IAAI,gBAAgB,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;AAC1D,CAAC;AAbe,wBAAgB,mBAa/B,CAAA;AAED,IAAI,gBAAgB,CAAC,YAAY,GAAG,iEAAiE,CAAC;AACtG,0DAA0D;AAC1D,uDAAuD;AACvD,IAAI,gBAAgB,CAAC,gBAAgB,GAAG,sBAAsB,CAAC","sourcesContent":["// Some of the code comes from WebComponents.JS\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/HTMLImports/path.js\n\nimport {RegExpWrapper, StringWrapper, isPresent, isBlank} from '../src/facade/lang';\nimport {UrlResolver} from './url_resolver';\n\nexport class StyleWithImports {\n/**\n * @param {?} style\n * @param {?} styleUrls\n */\nconstructor(public style: string,\npublic styleUrls: string[]) {}\n\n  static _tsickle_typeAnnotationsHelper() {\n /** @type {?} */\nStyleWithImports.prototype.style;\n /** @type {?} */\nStyleWithImports.prototype.styleUrls;\n  }\n\n}\n/**\n * @param {?} url\n * @return {?}\n */\nexport function isStyleUrlResolvable(url: string): boolean {\n  if (isBlank(url) || url.length === 0 || url[0] == '/') return false;\n  var /** @type {?} */ schemeMatch = RegExpWrapper.firstMatch(_urlWithSchemaRe, url);\n  return isBlank(schemeMatch) || schemeMatch[1] == 'package' || schemeMatch[1] == 'asset';\n}\n/**\n *  Rewrites stylesheets by resolving and removing the @import urls that are either relative or don't have a `package:` scheme\n * @param {?} resolver\n * @param {?} baseUrl\n * @param {?} cssText\n * @return {?}\n */\nexport function extractStyleUrls(resolver: UrlResolver, baseUrl: string,\n                                 cssText: string): StyleWithImports {\n  var /** @type {?} */ foundUrls = [];\n  var /** @type {?} */ modifiedCssText = StringWrapper.replaceAllMapped(cssText, _cssImportRe, (m) => {\n    var /** @type {?} */ url = isPresent(m[1]) ? m[1] : m[2];\n    if (!isStyleUrlResolvable(url)) {\n      // Do not attempt to resolve non-package absolute URLs with URI scheme\n      return m[0];\n    }\n    foundUrls.push(resolver.resolve(baseUrl, url));\n    return '';\n  });\n  return new StyleWithImports(modifiedCssText, foundUrls);\n}\n\nvar /** @type {?} */ _cssImportRe = /@import\\s+(?:url\\()?\\s*(?:(?:['\"]([^'\"]*))|([^;\\)\\s]*))[^;]*;?/g;\n// TODO: can't use /^[^:/?#.]+:/g due to clang-format bug:\n//       https://github.com/angular/angular/issues/4596\nvar /** @type {?} */ _urlWithSchemaRe = /^([a-zA-Z\\-\\+\\.]+):/g;\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}