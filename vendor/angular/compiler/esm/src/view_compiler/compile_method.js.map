{"version":3,"file":"compile_method.js","sourceRoot":"","sources":["../../../../../../modules/@angular/compiler/src/view_compiler/compile_method.ts"],"names":[],"mappings":"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","sourcesContent":["import {isPresent} from '../../src/facade/lang';\nimport {ListWrapper} from '../../src/facade/collection';\n\nimport * as o from '../output/output_ast';\nimport {TemplateAst} from '../template_ast';\n\nimport {CompileView} from './compile_view';\n\nclass _DebugState {\n/**\n * @param {?} nodeIndex\n * @param {?} sourceAst\n */\nconstructor(public nodeIndex: number,\npublic sourceAst: TemplateAst) {}\n\n  static _tsickle_typeAnnotationsHelper() {\n /** @type {?} */\n_DebugState.prototype.nodeIndex;\n /** @type {?} */\n_DebugState.prototype.sourceAst;\n  }\n\n}\n\nvar /** @type {?} */ NULL_DEBUG_STATE = new _DebugState(null, null);\n\nexport class CompileMethod {\nprivate _newState: _DebugState = NULL_DEBUG_STATE;\nprivate _currState: _DebugState = NULL_DEBUG_STATE;\nprivate _debugEnabled: boolean;\nprivate _bodyStatements: o.Statement[] = [];\n/**\n * @param {?} _view\n */\nconstructor(private _view: CompileView) {\n    this._debugEnabled = this._view.genConfig.genDebugInfo;\n  }\n/**\n * @return {?}\n */\nprivate _updateDebugContextIfNeeded() {\n    if (this._newState.nodeIndex !== this._currState.nodeIndex ||\n        this._newState.sourceAst !== this._currState.sourceAst) {\n      var /** @type {?} */ expr = this._updateDebugContext(this._newState);\n      if (isPresent(expr)) {\n        this._bodyStatements.push(expr.toStmt());\n      }\n    }\n  }\n/**\n * @param {?} newState\n * @return {?}\n */\nprivate _updateDebugContext(newState: _DebugState): o.Expression {\n    this._currState = this._newState = newState;\n    if (this._debugEnabled) {\n      var /** @type {?} */ sourceLocation =\n          isPresent(newState.sourceAst) ? newState.sourceAst.sourceSpan.start : null;\n\n      return o.THIS_EXPR.callMethod('debug', [\n        o.literal(newState.nodeIndex),\n        isPresent(sourceLocation) ? o.literal(sourceLocation.line) : o.NULL_EXPR,\n        isPresent(sourceLocation) ? o.literal(sourceLocation.col) : o.NULL_EXPR\n      ]);\n    } else {\n      return null;\n    }\n  }\n/**\n * @param {?} nodeIndex\n * @param {?} templateAst\n * @return {?}\n */\nresetDebugInfoExpr(nodeIndex: number, templateAst: TemplateAst): o.Expression {\n    var /** @type {?} */ res = this._updateDebugContext(new _DebugState(nodeIndex, templateAst));\n    return isPresent(res) ? res : o.NULL_EXPR;\n  }\n/**\n * @param {?} nodeIndex\n * @param {?} templateAst\n * @return {?}\n */\nresetDebugInfo(nodeIndex: number, templateAst: TemplateAst) {\n    this._newState = new _DebugState(nodeIndex, templateAst);\n  }\n/**\n * @param {?} stmt\n * @return {?}\n */\naddStmt(stmt: o.Statement) {\n    this._updateDebugContextIfNeeded();\n    this._bodyStatements.push(stmt);\n  }\n/**\n * @param {?} stmts\n * @return {?}\n */\naddStmts(stmts: o.Statement[]) {\n    this._updateDebugContextIfNeeded();\n    ListWrapper.addAll(this._bodyStatements, stmts);\n  }\n/**\n * @return {?}\n */\nfinish(): o.Statement[] { return this._bodyStatements; }\n/**\n * @return {?}\n */\nisEmpty(): boolean { return this._bodyStatements.length === 0; }\n\n  static _tsickle_typeAnnotationsHelper() {\n /** @type {?} */\nCompileMethod.prototype._newState;\n /** @type {?} */\nCompileMethod.prototype._currState;\n /** @type {?} */\nCompileMethod.prototype._debugEnabled;\n /** @type {?} */\nCompileMethod.prototype._bodyStatements;\n /** @type {?} */\nCompileMethod.prototype._view;\n  }\n\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}