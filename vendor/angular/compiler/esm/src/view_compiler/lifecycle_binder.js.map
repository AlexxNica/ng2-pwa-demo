{"version":3,"file":"lifecycle_binder.js","sourceRoot":"","sources":["../../../../../../modules/@angular/compiler/src/view_compiler/lifecycle_binder.ts"],"names":[],"mappings":"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","sourcesContent":["import {LifecycleHooks} from '../../core_private';\nimport * as o from '../output/output_ast';\nimport {DetectChangesVars, ChangeDetectorStateEnum} from './constants';\nimport {CompileDirectiveMetadata, CompilePipeMetadata} from '../compile_metadata';\nimport {DirectiveAst} from '../template_ast';\nimport {CompileElement} from './compile_element';\nimport {CompileView} from './compile_view';\n\n\n\nvar /** @type {?} */ STATE_IS_NEVER_CHECKED =\n    o.THIS_EXPR.prop('cdState').identical(ChangeDetectorStateEnum.NeverChecked);\nvar /** @type {?} */ NOT_THROW_ON_CHANGES = o.not(DetectChangesVars.throwOnChange);\n/**\n * @param {?} directiveAst\n * @param {?} directiveInstance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindDirectiveDetectChangesLifecycleCallbacks(\n    directiveAst: DirectiveAst, directiveInstance: o.Expression, compileElement: CompileElement) {\n  var /** @type {?} */ view = compileElement.view;\n  var /** @type {?} */ detectChangesInInputsMethod = view.detectChangesInInputsMethod;\n  var /** @type {?} */ lifecycleHooks = directiveAst.directive.lifecycleHooks;\n  if (lifecycleHooks.indexOf(LifecycleHooks.OnChanges) !== -1 && directiveAst.inputs.length > 0) {\n    detectChangesInInputsMethod.addStmt(new o.IfStmt(\n        DetectChangesVars.changes.notIdentical(o.NULL_EXPR),\n        [directiveInstance.callMethod('ngOnChanges', [DetectChangesVars.changes]).toStmt()]));\n  }\n  if (lifecycleHooks.indexOf(LifecycleHooks.OnInit) !== -1) {\n    detectChangesInInputsMethod.addStmt(\n        new o.IfStmt(STATE_IS_NEVER_CHECKED.and(NOT_THROW_ON_CHANGES),\n                     [directiveInstance.callMethod('ngOnInit', []).toStmt()]));\n  }\n  if (lifecycleHooks.indexOf(LifecycleHooks.DoCheck) !== -1) {\n    detectChangesInInputsMethod.addStmt(new o.IfStmt(\n        NOT_THROW_ON_CHANGES, [directiveInstance.callMethod('ngDoCheck', []).toStmt()]));\n  }\n}\n/**\n * @param {?} directiveMeta\n * @param {?} directiveInstance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindDirectiveAfterContentLifecycleCallbacks(directiveMeta: CompileDirectiveMetadata,\n                                                            directiveInstance: o.Expression,\n                                                            compileElement: CompileElement) {\n  var /** @type {?} */ view = compileElement.view;\n  var /** @type {?} */ lifecycleHooks = directiveMeta.lifecycleHooks;\n  var /** @type {?} */ afterContentLifecycleCallbacksMethod = view.afterContentLifecycleCallbacksMethod;\n  afterContentLifecycleCallbacksMethod.resetDebugInfo(compileElement.nodeIndex,\n                                                      compileElement.sourceAst);\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterContentInit) !== -1) {\n    afterContentLifecycleCallbacksMethod.addStmt(new o.IfStmt(\n        STATE_IS_NEVER_CHECKED, [directiveInstance.callMethod('ngAfterContentInit', []).toStmt()]));\n  }\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterContentChecked) !== -1) {\n    afterContentLifecycleCallbacksMethod.addStmt(\n        directiveInstance.callMethod('ngAfterContentChecked', []).toStmt());\n  }\n}\n/**\n * @param {?} directiveMeta\n * @param {?} directiveInstance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindDirectiveAfterViewLifecycleCallbacks(directiveMeta: CompileDirectiveMetadata,\n                                                         directiveInstance: o.Expression,\n                                                         compileElement: CompileElement) {\n  var /** @type {?} */ view = compileElement.view;\n  var /** @type {?} */ lifecycleHooks = directiveMeta.lifecycleHooks;\n  var /** @type {?} */ afterViewLifecycleCallbacksMethod = view.afterViewLifecycleCallbacksMethod;\n  afterViewLifecycleCallbacksMethod.resetDebugInfo(compileElement.nodeIndex,\n                                                   compileElement.sourceAst);\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterViewInit) !== -1) {\n    afterViewLifecycleCallbacksMethod.addStmt(new o.IfStmt(\n        STATE_IS_NEVER_CHECKED, [directiveInstance.callMethod('ngAfterViewInit', []).toStmt()]));\n  }\n  if (lifecycleHooks.indexOf(LifecycleHooks.AfterViewChecked) !== -1) {\n    afterViewLifecycleCallbacksMethod.addStmt(\n        directiveInstance.callMethod('ngAfterViewChecked', []).toStmt());\n  }\n}\n/**\n * @param {?} directiveMeta\n * @param {?} directiveInstance\n * @param {?} compileElement\n * @return {?}\n */\nexport function bindDirectiveDestroyLifecycleCallbacks(directiveMeta: CompileDirectiveMetadata,\n                                                       directiveInstance: o.Expression,\n                                                       compileElement: CompileElement) {\n  var /** @type {?} */ onDestroyMethod = compileElement.view.destroyMethod;\n  onDestroyMethod.resetDebugInfo(compileElement.nodeIndex, compileElement.sourceAst);\n  if (directiveMeta.lifecycleHooks.indexOf(LifecycleHooks.OnDestroy) !== -1) {\n    onDestroyMethod.addStmt(directiveInstance.callMethod('ngOnDestroy', []).toStmt());\n  }\n}\n/**\n * @param {?} pipeMeta\n * @param {?} pipeInstance\n * @param {?} view\n * @return {?}\n */\nexport function bindPipeDestroyLifecycleCallbacks(pipeMeta: CompilePipeMetadata,\n                                                  pipeInstance: o.Expression, view: CompileView) {\n  var /** @type {?} */ onDestroyMethod = view.destroyMethod;\n  if (pipeMeta.lifecycleHooks.indexOf(LifecycleHooks.OnDestroy) !== -1) {\n    onDestroyMethod.addStmt(pipeInstance.callMethod('ngOnDestroy', []).toStmt());\n  }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}